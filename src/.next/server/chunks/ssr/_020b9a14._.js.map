{"version":3,"sources":["../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/server-actions.js","../../../../.next-internal/server/app/workout/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29","../../../../app/workout/%5Bid%5D/action.ts"],"sourcesContent":["\"use server\";\nimport { cookies } from \"next/headers\";\nasync function invalidateCacheAction() {\n  void (await cookies()).delete(`__clerk_invalidate_cache_cookie_${Date.now()}`);\n}\nexport {\n  invalidateCacheAction\n};\n","export {detectKeylessEnvDriftAction as '7f00aa33224ad7f5625ae15d101f59bc64b153d43b'} from 'ACTIONS_MODULE0'\nexport {invalidateCacheAction as '7f8a5d76e826325ce7dd010842a67756b2cddddf7e'} from 'ACTIONS_MODULE1'\nexport {createOrReadKeylessAction as '7f9a14fcdd8e4bdc58ad32c320e379d85f1acf6501'} from 'ACTIONS_MODULE0'\nexport {formatMetadataHeaders as '7faa8bb475b36a172a0de85e700f1e126054c1ab93'} from 'ACTIONS_MODULE2'\nexport {collectKeylessMetadata as '7fcb61e00348cc2d63111375d9cbb8c1a1c5c1c232'} from 'ACTIONS_MODULE2'\nexport {detectKeylessEnvDriftAction as '7f00aa33224ad7f5625ae15d101f59bc64b153d43b'} from 'ACTIONS_MODULE0'\nexport {deleteKeylessAction as '7f5041eb519a7fba49dd2f9549f0a73f36bc2d4bfa'} from 'ACTIONS_MODULE0'\nexport {createOrReadKeylessAction as '7f9a14fcdd8e4bdc58ad32c320e379d85f1acf6501'} from 'ACTIONS_MODULE0'\nexport {syncKeylessConfigAction as '7fbe15cad3a1d51e92fe21855c4fcf4ebb2c6262cd'} from 'ACTIONS_MODULE0'\nexport {deleteKeylessAction as '7f5041eb519a7fba49dd2f9549f0a73f36bc2d4bfa'} from 'ACTIONS_MODULE0'\nexport {syncKeylessConfigAction as '7fbe15cad3a1d51e92fe21855c4fcf4ebb2c6262cd'} from 'ACTIONS_MODULE0'\nexport {updateWorkoutAction as '6056c0c35a223b313c34acfe8face4d56102b8bf1f'} from 'ACTIONS_MODULE3'\nexport {deleteWorkoutAction as '4088ef78a913e77cc528a81dd51e4c7126bf4b0042'} from 'ACTIONS_MODULE3'\nexport {completeWorkoutAction as '60f3b728523bf6382812e22ad8d217db894fb601ff'} from 'ACTIONS_MODULE3'\n","'use server'\n\nimport { z } from 'zod'\nimport { updateWorkout, deleteWorkout, completeWorkout } from '@/data/workouts'\nimport { auth } from '@clerk/nextjs/server'\n\n// Validation schema for workout updates\nconst UpdateWorkoutSchema = z.object({\n  title: z.string().min(1, 'Title is required').max(100, 'Title too long').optional(),\n  notes: z.string().max(500, 'Notes too long').optional(),\n  durationMinutes: z.number().min(1, 'Duration must be at least 1 minute').max(1440, 'Duration cannot exceed 24 hours').optional(),\n  completedAt: z.date().optional().nullable(),\n})\n\n// Validation schema for workout completion\nconst CompleteWorkoutSchema = z.object({\n  durationMinutes: z.number().min(1, 'Duration must be at least 1 minute').max(1440, 'Duration cannot exceed 24 hours'),\n})\n\nexport async function updateWorkoutAction(\n  workoutId: string,\n  data: z.infer<typeof UpdateWorkoutSchema>\n) {\n  try {\n    // Validate input data\n    const validatedData = UpdateWorkoutSchema.parse(data)\n\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Update workout with user ownership verification\n    const updatedWorkout = await updateWorkout(workoutId, userId, validatedData)\n\n    if (!updatedWorkout) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      workout: updatedWorkout,\n      message: 'Workout updated successfully'\n    }\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Return specific validation error\n      throw new Error(error.issues[0].message)\n    }\n\n    // Handle other errors\n    throw new Error(error instanceof Error ? error.message : 'Failed to update workout')\n  }\n}\n\nexport async function deleteWorkoutAction(workoutId: string) {\n  try {\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Delete workout with user ownership verification\n    const success = await deleteWorkout(workoutId, userId)\n\n    if (!success) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      message: 'Workout deleted successfully'\n    }\n\n  } catch (error) {\n    throw new Error(error instanceof Error ? error.message : 'Failed to delete workout')\n  }\n}\n\nexport async function completeWorkoutAction(\n  workoutId: string,\n  data: z.infer<typeof CompleteWorkoutSchema>\n) {\n  try {\n    // Validate input data\n    const validatedData = CompleteWorkoutSchema.parse(data)\n\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Complete workout with user ownership verification\n    const completedWorkout = await completeWorkout(workoutId, userId, validatedData.durationMinutes)\n\n    if (!completedWorkout) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      workout: completedWorkout,\n      message: 'Workout completed successfully'\n    }\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Return specific validation error\n      throw new Error(error.issues[0].message)\n    }\n\n    // Handle other errors\n    throw new Error(error instanceof Error ? error.message : 'Failed to complete workout')\n  }\n}"],"names":[],"mappings":"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","ignoreList":[0]}