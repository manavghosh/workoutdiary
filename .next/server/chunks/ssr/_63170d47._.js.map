{"version":3,"sources":["../../../../src/node_modules/%40clerk/nextjs/dist/esm/app-router/server-actions.js","../../../../.next-internal/server/app/workout/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29","../../../../src/app/workout/%5Bid%5D/action.ts"],"sourcesContent":["\"use server\";\nimport { cookies } from \"next/headers\";\nasync function invalidateCacheAction() {\n  void (await cookies()).delete(`__clerk_invalidate_cache_cookie_${Date.now()}`);\n}\nexport {\n  invalidateCacheAction\n};\n","export {detectKeylessEnvDriftAction as '7fb4a122d990c917e8464b15accc36aea24208351a'} from 'ACTIONS_MODULE0'\nexport {invalidateCacheAction as '7f16343f925a7dc420f5d2f74e96c24daab4312757'} from 'ACTIONS_MODULE1'\nexport {createOrReadKeylessAction as '7f26ae897071c7b2f879b1124de58c4ea0f8a28d00'} from 'ACTIONS_MODULE0'\nexport {formatMetadataHeaders as '7f578832c69659015ad7d413383873f74b951c7a20'} from 'ACTIONS_MODULE2'\nexport {collectKeylessMetadata as '7ffa10a82acbb0d6f08d92835375c6991dbb8151d9'} from 'ACTIONS_MODULE2'\nexport {createOrReadKeylessAction as '7f26ae897071c7b2f879b1124de58c4ea0f8a28d00'} from 'ACTIONS_MODULE0'\nexport {detectKeylessEnvDriftAction as '7fb4a122d990c917e8464b15accc36aea24208351a'} from 'ACTIONS_MODULE0'\nexport {deleteKeylessAction as '7fddc54dcbf4d7d7896fc22c6314ebf9931a580066'} from 'ACTIONS_MODULE0'\nexport {syncKeylessConfigAction as '7fec6adc9fe38b3d738a665b97c8945abed8aa98d8'} from 'ACTIONS_MODULE0'\nexport {deleteKeylessAction as '7fddc54dcbf4d7d7896fc22c6314ebf9931a580066'} from 'ACTIONS_MODULE0'\nexport {syncKeylessConfigAction as '7fec6adc9fe38b3d738a665b97c8945abed8aa98d8'} from 'ACTIONS_MODULE0'\nexport {updateWorkoutAction as '60d781dcca22d59b1a6f8203d027ab3bf516bf7813'} from 'ACTIONS_MODULE3'\nexport {deleteWorkoutAction as '40429fb9f22f47253f96e4e4455b1a9e52c6caf9bf'} from 'ACTIONS_MODULE3'\nexport {completeWorkoutAction as '60d7834388f0b19e3434ccd3bfd76ee1f9b75e99a2'} from 'ACTIONS_MODULE3'\n","'use server'\n\nimport { z } from 'zod'\nimport { updateWorkout, deleteWorkout, completeWorkout } from '@/data/workouts'\nimport { auth } from '@clerk/nextjs/server'\n\n// Validation schema for workout updates\nconst UpdateWorkoutSchema = z.object({\n  title: z.string().min(1, 'Title is required').max(100, 'Title too long').optional(),\n  notes: z.string().max(500, 'Notes too long').optional(),\n  durationMinutes: z.number().min(1, 'Duration must be at least 1 minute').max(1440, 'Duration cannot exceed 24 hours').optional(),\n  completedAt: z.date().optional().nullable(),\n})\n\n// Validation schema for workout completion\nconst CompleteWorkoutSchema = z.object({\n  durationMinutes: z.number().min(1, 'Duration must be at least 1 minute').max(1440, 'Duration cannot exceed 24 hours'),\n})\n\nexport async function updateWorkoutAction(\n  workoutId: string,\n  data: z.infer<typeof UpdateWorkoutSchema>\n) {\n  try {\n    // Validate input data\n    const validatedData = UpdateWorkoutSchema.parse(data)\n\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Update workout with user ownership verification\n    const updatedWorkout = await updateWorkout(workoutId, userId, validatedData)\n\n    if (!updatedWorkout) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      workout: updatedWorkout,\n      message: 'Workout updated successfully'\n    }\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Return specific validation error\n      throw new Error(error.issues[0].message)\n    }\n\n    // Handle other errors\n    throw new Error(error instanceof Error ? error.message : 'Failed to update workout')\n  }\n}\n\nexport async function deleteWorkoutAction(workoutId: string) {\n  try {\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Delete workout with user ownership verification\n    const success = await deleteWorkout(workoutId, userId)\n\n    if (!success) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      message: 'Workout deleted successfully'\n    }\n\n  } catch (error) {\n    throw new Error(error instanceof Error ? error.message : 'Failed to delete workout')\n  }\n}\n\nexport async function completeWorkoutAction(\n  workoutId: string,\n  data: z.infer<typeof CompleteWorkoutSchema>\n) {\n  try {\n    // Validate input data\n    const validatedData = CompleteWorkoutSchema.parse(data)\n\n    // Get authenticated user\n    const { userId } = await auth()\n    if (!userId) {\n      throw new Error('Authentication required')\n    }\n\n    // Complete workout with user ownership verification\n    const completedWorkout = await completeWorkout(workoutId, userId, validatedData.durationMinutes)\n\n    if (!completedWorkout) {\n      throw new Error('Workout not found or access denied')\n    }\n\n    return {\n      success: true,\n      workout: completedWorkout,\n      message: 'Workout completed successfully'\n    }\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Return specific validation error\n      throw new Error(error.issues[0].message)\n    }\n\n    // Handle other errors\n    throw new Error(error instanceof Error ? error.message : 'Failed to complete workout')\n  }\n}"],"names":[],"mappings":"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","ignoreList":[0]}